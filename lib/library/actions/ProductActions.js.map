{"version":3,"sources":["../../../src/library/actions/ProductActions.ts"],"sourcesContent":["import { Event, SDK, ServerOptions } from \"@commercetools/frontend-sdk\";\nimport {\n\tGetProductQuery,\n\tProductQueryQuery,\n\tQueryProductCategoriesQuery,\n} from \"../../types/queries/ProductQueries\";\nimport {\n\tGetProductAction,\n\tGetSearchableProductAttributesAction,\n\tProductQueryAction,\n\tQueryProductCategoriesAction,\n} from \"../../types/actions/ProductActions\";\nimport { Product, Result, FilterField } from \"shared/types/product\";\nimport { ComposableCommerceEvents } from \"../../types/events/ComposableCommerceEvents\";\n\nexport type ProductActions = {\n\tgetProduct: GetProductAction;\n\tquery: ProductQueryAction;\n\tqueryCategories: QueryProductCategoriesAction;\n\tgetSearchableAttributes: GetSearchableProductAttributesAction;\n};\n\nexport const getProductActions = (\n\tsdk: SDK<ComposableCommerceEvents>\n): ProductActions => {\n\treturn {\n\t\tgetProduct: async (\n\t\t\tquery: GetProductQuery,\n\t\t\toptions: { serverOptions?: ServerOptions } = {}\n\t\t) => {\n\t\t\tconst response = await sdk.callAction<Product>({\n\t\t\t\tactionName: \"product/getProduct\",\n\t\t\t\tquery,\n\t\t\t\tserverOptions: options.serverOptions,\n\t\t\t});\n\n\t\t\tif (response.isError === false && response.data) {\n\t\t\t\tsdk.trigger(\n\t\t\t\t\tnew Event({\n\t\t\t\t\t\teventName: \"productFetched\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tproduct: response.data,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn response;\n\t\t},\n\t\tquery: async (\n\t\t\tquery: ProductQueryQuery,\n\t\t\toptions: { serverOptions?: ServerOptions } = {}\n\t\t) => {\n\t\t\tconst response = await sdk.callAction<Result>({\n\t\t\t\tactionName: \"product/query\",\n\t\t\t\tquery,\n\t\t\t\tserverOptions: options.serverOptions,\n\t\t\t});\n\n\t\t\tif (response.isError === false) {\n\t\t\t\tsdk.trigger(\n\t\t\t\t\tnew Event({\n\t\t\t\t\t\teventName: \"productsQueried\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tquery: query,\n\t\t\t\t\t\t\tresult: response.data,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn response;\n\t\t},\n\t\tqueryCategories: async (\n\t\t\tquery: QueryProductCategoriesQuery,\n\t\t\toptions: { serverOptions?: ServerOptions } = {}\n\t\t) => {\n\t\t\tconst response = await sdk.callAction<Result>({\n\t\t\t\tactionName: \"product/queryCategories\",\n\t\t\t\tquery,\n\t\t\t\tserverOptions: options.serverOptions,\n\t\t\t});\n\n\t\t\tif (response.isError === false) {\n\t\t\t\tsdk.trigger(\n\t\t\t\t\tnew Event({\n\t\t\t\t\t\teventName: \"productCategoriesQueried\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tquery: query,\n\t\t\t\t\t\t\tresult: response.data,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn response;\n\t\t},\n\t\tgetSearchableAttributes: async (\n\t\t\toptions: { serverOptions?: ServerOptions } = {}\n\t\t) => {\n\t\t\tconst response = await sdk.callAction<FilterField[]>({\n\t\t\t\tactionName: \"product/searchableAttributes\",\n\t\t\t\tserverOptions: options.serverOptions,\n\t\t\t});\n\n\t\t\tif (response.isError === false) {\n\t\t\t\tsdk.trigger(\n\t\t\t\t\tnew Event({\n\t\t\t\t\t\teventName: \"searchableProductAttributesFetched\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tfilterFields: response.data,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn response;\n\t\t},\n\t};\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA0C;AAsBnC,IAAM,oBAAoB,CAChC,QACoB;AACpB,SAAO;AAAA,IACN,YAAY,OACX,OACA,UAA6C,CAAC,MAC1C;AACJ,YAAM,WAAW,MAAM,IAAI,WAAoB;AAAA,QAC9C,YAAY;AAAA,QACZ;AAAA,QACA,eAAe,QAAQ;AAAA,MACxB,CAAC;AAED,UAAI,SAAS,YAAY,SAAS,SAAS,MAAM;AAChD,YAAI;AAAA,UACH,IAAI,0BAAM;AAAA,YACT,WAAW;AAAA,YACX,MAAM;AAAA,cACL,SAAS,SAAS;AAAA,YACnB;AAAA,UACD,CAAC;AAAA,QACF;AAAA,MACD;AACA,aAAO;AAAA,IACR;AAAA,IACA,OAAO,OACN,OACA,UAA6C,CAAC,MAC1C;AACJ,YAAM,WAAW,MAAM,IAAI,WAAmB;AAAA,QAC7C,YAAY;AAAA,QACZ;AAAA,QACA,eAAe,QAAQ;AAAA,MACxB,CAAC;AAED,UAAI,SAAS,YAAY,OAAO;AAC/B,YAAI;AAAA,UACH,IAAI,0BAAM;AAAA,YACT,WAAW;AAAA,YACX,MAAM;AAAA,cACL;AAAA,cACA,QAAQ,SAAS;AAAA,YAClB;AAAA,UACD,CAAC;AAAA,QACF;AAAA,MACD;AACA,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB,OAChB,OACA,UAA6C,CAAC,MAC1C;AACJ,YAAM,WAAW,MAAM,IAAI,WAAmB;AAAA,QAC7C,YAAY;AAAA,QACZ;AAAA,QACA,eAAe,QAAQ;AAAA,MACxB,CAAC;AAED,UAAI,SAAS,YAAY,OAAO;AAC/B,YAAI;AAAA,UACH,IAAI,0BAAM;AAAA,YACT,WAAW;AAAA,YACX,MAAM;AAAA,cACL;AAAA,cACA,QAAQ,SAAS;AAAA,YAClB;AAAA,UACD,CAAC;AAAA,QACF;AAAA,MACD;AACA,aAAO;AAAA,IACR;AAAA,IACA,yBAAyB,OACxB,UAA6C,CAAC,MAC1C;AACJ,YAAM,WAAW,MAAM,IAAI,WAA0B;AAAA,QACpD,YAAY;AAAA,QACZ,eAAe,QAAQ;AAAA,MACxB,CAAC;AAED,UAAI,SAAS,YAAY,OAAO;AAC/B,YAAI;AAAA,UACH,IAAI,0BAAM;AAAA,YACT,WAAW;AAAA,YACX,MAAM;AAAA,cACL,cAAc,SAAS;AAAA,YACxB;AAAA,UACD,CAAC;AAAA,QACF;AAAA,MACD;AACA,aAAO;AAAA,IACR;AAAA,EACD;AACD;","names":[]}